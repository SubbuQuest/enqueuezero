(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{249:function(e,t,s){"use strict";s.r(t);var r=s(0),a=Object(r.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("p",[e._v("URI links live everywhere outside the website itself, so we tend to change URIs as less as possible. Check more on "),s("a",{attrs:{href:"https://www.w3.org/Provider/Style/URI",target:"_blank",rel:"noopener noreferrer"}},[e._v("Hypertext Style: Cool URIs don't change"),s("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),s("p",[e._v("A typical request processing routine is as below:")]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),s("p",[e._v("There are many means to determine which function to execute for an URL.")]),e._v(" "),e._m(6),e._v(" "),s("p",[e._v("Among them, Regex Resolution and Template Resolution are the most popular.")]),e._v(" "),e._m(7),e._v(" "),s("p",[e._v("Regex is a string pattern matching technique. We define URL regex first, and web framework will apply URLs to regex one by one until matching.")]),e._v(" "),s("p",[e._v("For example, in Django, you can define rules like below code:")]),e._v(" "),e._m(8),e._m(9),e._v(" "),s("p",[e._v("Regex is very fast because the expressions are generally pre-compiled when web application loaded.")]),e._v(" "),e._m(10),e._v(" "),s("p",[e._v("Regex is hard to read, so people invent template string to make it more readable.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://tools.ietf.org/html/rfc6570",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC 6570: URI Template"),s("OutboundLink")],1),e._v(" is among one of the most popular solutions. It defines expressions by "),s("code",[e._v("{")]),e._v(" and "),s("code",[e._v("}")]),e._v(". For example,")]),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),s("p",[e._v("Some web frameworks even support the glob pattern. For example,")]),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),s("p",[e._v("To make the resolution more generic, a function-based solution is often used as a supplement solution. For example, in "),s("a",{attrs:{href:"http://sinatrarb.com/intro.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sinatra"),s("OutboundLink")],1),e._v(", you can add an extra function to the url resolution:")]),e._v(" "),e._m(18),s("p",[e._v("We can even use data in the headers or domain. For example, in "),s("a",{attrs:{href:"https://cloud.google.com/appengine/docs/standard/java/how-requests-are-routed",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google App Engine"),s("OutboundLink")],1),e._v(", you can dispatch requests to "),s("code",[e._v("http://simple-sample.appspot.com/mobile/")]),e._v(" and "),s("code",[e._v("http://simple-sample.appspot.com/work/")]),e._v(" by rules defined in below code.")]),e._v(" "),e._m(19),e._m(20),e._v(" "),e._m(21),e._v(" "),e._m(22),e._v(" "),e._m(23),e._v(" "),e._m(24),e._v(" "),s("p",[e._v("We can define patterns in a nested way. For example, in Django, you can define as below:")]),e._v(" "),e._m(25),e._m(26),e._v(" "),s("p",[e._v("We have a demand to get URLs from a given routing URL and parameters. We call such use case reverse.")]),e._v(" "),e._m(27),e._v(" "),e._m(28),s("p",[e._v("In template, we also can use similar functions:")]),e._v(" "),e._m(29),e._m(30),e._v(" "),e._m(31),e._v(" "),s("p",[e._v("Sinatra framework is simple and elegant.")]),e._v(" "),e._m(32),e._m(33),e._v(" "),s("p",[e._v("Flask is more tedious but still very short.")]),e._v(" "),e._m(34),e._m(35),e._v(" "),s("p",[e._v("Sprint has similar syntax but with much boilerplate code.")]),e._v(" "),e._m(36),e._m(37),e._v(" "),e._m(38),e._v(" "),e._m(39),e._m(40),e._v(" "),s("p",[s("a",{attrs:{href:"https://opensource.zalando.com/skipper/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Skipper"),s("OutboundLink")],1),e._v(" can route requests via an "),s("a",{attrs:{href:"https://opensource.zalando.com/skipper/data-clients/eskip-file/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("eskip")]),e._v(" file"),s("OutboundLink")],1),e._v(" like below.")]),e._v(" "),e._m(41),e._m(42),e._v(" "),s("p",[e._v("Web framework routes URLs to functions based on a pre-registered URL rules. It's one of the very core features in any web framework.")]),e._v(" "),e._m(43),e._v(" "),e._m(44)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"context"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#context","aria-hidden":"true"}},[this._v("#")]),this._v(" Context")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Most modern web frameworks provide a component called "),t("code",[this._v("Router")]),this._v(" or "),t("code",[this._v("URLDispatcher")]),this._v(" to resolve a function or method to handle requests to URLs.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"patterns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#patterns","aria-hidden":"true"}},[this._v("#")]),this._v(" Patterns")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"request-process"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#request-process","aria-hidden":"true"}},[this._v("#")]),this._v(" Request Process")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Web framework loads URL resolution map. Each rule is bound to a handling class, or function, or method.")]),this._v(" "),t("li",[this._v("When request comes, web framework iterates through each route in defining order sequence and stops at the first matching route.")]),this._v(" "),t("li",[this._v("Once the URL rule matches, web framework construct request information and pass it to the handling class, or function, or method.")]),this._v(" "),t("li",[this._v("A 404 exception is raised when no rule matches.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"resolution"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resolution","aria-hidden":"true"}},[this._v("#")]),this._v(" Resolution")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Regex Resolution")]),this._v(" "),t("li",[this._v("Template Resolution")]),this._v(" "),t("li",[this._v("Directory Resolution")]),this._v(" "),t("li",[this._v("Function Resolution")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"regex-resolution"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#regex-resolution","aria-hidden":"true"}},[this._v("#")]),this._v(" Regex Resolution")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("from django.urls import re_path\nfrom . import view\n\nurlpatterns = [\n    re_path(r'posts/(?P<id>\\d+/$', view.get_post),\n    re_path(r'posts/(?P<id>\\d+/comments/$', view.get_post_comment),\n]\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("Above code can resolute "),s("code",[e._v("/posts/42")]),e._v(" to "),s("code",[e._v("view.get_post")]),e._v(" to execute; resolute "),s("code",[e._v("/posts/42/comments")]),e._v(" to "),s("code",[e._v("view.get_post_comment")]),e._v(" to execute.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"template-resolution"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#template-resolution","aria-hidden":"true"}},[this._v("#")]),this._v(" Template Resolution")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("code",[e._v("/posts{/id}")]),e._v(" matches "),s("code",[e._v("/posts/42")]),e._v(".")]),e._v(" "),s("li",[s("code",[e._v("/posts{/id*}")]),e._v(" matches "),s("code",[e._v("/posts/42/comments")]),e._v(", "),s("code",[e._v("/posts/42/likes")]),e._v(", etc.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Another popular solution is to use angle bracket "),t("code",[this._v("<")]),this._v(" and "),t("code",[this._v(">")]),this._v(". For example,")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("code",[e._v("/posts/<int:id>")]),e._v(" matches "),s("code",[e._v("/posts/42")]),e._v(".")]),e._v(" "),s("li",[s("code",[e._v("/posts/<int:id>/comments")]),e._v(" matches "),s("code",[e._v("/posts/42/comments")]),e._v(".")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Some web frameworks also use "),t("code",[this._v(":")]),this._v("  to define variables. For example,")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("code",[e._v("/posts/:id")]),e._v(" matches "),s("code",[e._v("/posts/42")]),e._v(".")]),e._v(" "),s("li",[s("code",[e._v("/posts/:id/comments")]),e._v(" matches "),s("code",[e._v("/posts/42/comments")]),e._v(".")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("code",[e._v("/posts/*")]),e._v(" matches "),s("code",[e._v("/posts/42")]),e._v(".")]),e._v(" "),s("li",[s("code",[e._v("/posts/*.*")]),e._v(" matches "),s("code",[e._v("/posts/42.html")]),e._v(" or "),s("code",[e._v("/posts/42.json")]),e._v(".")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"function-based-resolution"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-based-resolution","aria-hidden":"true"}},[this._v("#")]),this._v(" Function-based Resolution")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("set(:probability) { |value| condition { rand <= value } }\n\nget '/win_a_car', :probability => 0.1 do\n  \"You won!\"\nend\n\nget '/win_a_car' do\n  \"Sorry, you lost.\"\nend\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('dispatch:\n  # Send all mobile traffic to the mobile frontend.\n  - url: "*/mobile/*"\n    service: mobile-frontend\n\n  # Send all work to the one static backend.\n  - url: "*/work/*"\n    service: static-backend\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"directory-based-resolution"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#directory-based-resolution","aria-hidden":"true"}},[this._v("#")]),this._v(" Directory-based Resolution")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Based on the similarity of the "),t("code",[this._v("/")]),this._v(" to file path in the file system, some frameworks map URL to script files in the same structure as they are in the filesystem. For example:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("URL "),s("code",[e._v("/posts/comments/")]),e._v(" is handled by script "),s("code",[e._v("./posts/comments.php")]),e._v(".")]),e._v(" "),s("li",[e._v("URL "),s("code",[e._v("/posts/42")]),e._v(" is handled by function "),s("code",[e._v("_q_lookup")]),e._v(" in script "),s("code",[e._v("./posts.py")]),e._v(" (Quixote framework).")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"nested-definition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nested-definition","aria-hidden":"true"}},[this._v("#")]),this._v(" Nested Definition")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Duplicate patterns often appear in urls. For example: "),t("code",[this._v("/posts/*/comments")]),this._v(" and "),t("code",[this._v("/posts/*/likes")]),this._v(" share same fragment "),t("code",[this._v("/posts/*")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("post_urls = [\n    path('comments', view.show_comments),\n    path('likes', view.show_likes),\n]\nurls = path('/posts/*' , post_urls)\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"generating-urls"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generating-urls","aria-hidden":"true"}},[this._v("#")]),this._v(" Generating URLs")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For example, in Flask, you can use "),t("code",[this._v("url_for")]),this._v(" in view function to generate a URL for redirection:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("from flask import url_for, redirect\n\nreturn redirect(url_for('add-post-comment'))\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# post_comment.html\n<a href=\"{% url 'add-post-comment' %}\">Add Comment</a>\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"solutions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#solutions","aria-hidden":"true"}},[this._v("#")]),this._v(" Solutions")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"sinatra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sinatra","aria-hidden":"true"}},[this._v("#")]),this._v(" Sinatra")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("get '/posts/:id' do\n    # do something\nend\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"flask"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flask","aria-hidden":"true"}},[this._v("#")]),this._v(" Flask")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("@app.route('/posts/<int:id>')\ndef get_post(id):\n    # do something\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"sprint"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sprint","aria-hidden":"true"}},[this._v("#")]),this._v(" Sprint")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('@RestController\n@SpringBootApplication\npublic class PostApplication {\n\n  @RequestMapping(value = "/posts/{id}")\n  public String comment(@RequestParam String id) {\n    return "Spring in Action";\n  }\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"django"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#django","aria-hidden":"true"}},[this._v("#")]),this._v(" Django")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("In Django, registering is defined in a "),t("code",[this._v("urls.py")]),this._v(" file.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# in views.py\ndef get_post(request, id):\n    # do something\n\n# in urls.py\nurlpatterns = [\n    path('/posts/<int:id>', get_post\n]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"skipper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#skipper","aria-hidden":"true"}},[this._v("#")]),this._v(" Skipper")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('hello: Path("/hello") -> "https://www.example.org"\'\ngoogleWildcardMatch:\n        *\n        -> setPath("/search")\n        -> setQuery("q", "godoc skipper")\n        -> "https://www.google.com";\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"conclusions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#conclusions","aria-hidden":"true"}},[this._v("#")]),this._v(" Conclusions")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references","aria-hidden":"true"}},[this._v("#")]),this._v(" References")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("https://www.w3.org/Provider/Style/URI")]),e._v(" "),s("li",[e._v("http://t-code.pl/blog/2016/11/Towards-server-side-routing-with-URI-Templates/")]),e._v(" "),s("li",[e._v("https://tools.ietf.org/html/rfc6570")]),e._v(" "),s("li",[e._v("https://docs.djangoproject.com/en/2.0/topics/http/urls/")]),e._v(" "),s("li",[e._v("http://sinatrarb.com/intro.html")]),e._v(" "),s("li",[e._v("http://flask.pocoo.org/docs/0.12/api/#url-route-registrations")]),e._v(" "),s("li",[e._v("https://opensource.zalando.com/skipper/reference/architecture/")])])}],!1,null,null,null);t.default=a.exports}}]);