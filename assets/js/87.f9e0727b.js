(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{229:function(e,t,s){"use strict";s.r(t);var r=s(0),n=Object(r.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),s("p",[e._v("These applications are deployed across a cluster of machines.")]),e._v(" "),s("p",[e._v("As a Kubernetes user, you define how the application should run.")]),e._v(" "),s("p",[e._v("You also define how the application should interact with other applications or the outside world.")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("Kubernetes brings together machine servers into a cluster using a shared network.")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),s("hr"),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),s("hr"),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),s("hr"),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),e._v(" "),s("hr"),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),s("hr"),e._v(" "),e._m(22),e._v(" "),e._m(23),e._v(" "),e._m(24),e._v(" "),e._m(25),e._v(" "),s("hr"),e._v(" "),e._m(26),e._v(" "),e._m(27),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("For database applications, we cannot directly kill pods in random order.")]),e._v(" "),s("p",[e._v("Instead, we often kill all slaves and let the master die at last.")]),e._v(" "),e._m(28),e._v(" "),e._m(29),e._v(" "),s("p",[e._v("It provides guarantees about the ordering and uniqueness of these Pods.")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("For applications like logging agents, we want to deploy them per host.")]),e._v(" "),e._m(30),e._v(" "),s("p",[e._v("It ensures that all (or some) Nodes run a copy of a Pod.")]),e._v(" "),s("p",[e._v("As nodes are added to the cluster, Pods are added to them.")]),e._v(" "),s("p",[e._v("As nodes are removed from the cluster, those Pods are garbage collected.")]),e._v(" "),s("p",[e._v("Deleting a DaemonSet will clean up the Pods it created.")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("Some Kubernetes objects are owners of other objects.")]),e._v(" "),s("p",[e._v("For example, a ReplicaSet is the owner of a set of Pods.")]),e._v(" "),s("p",[e._v("When the owner is deleted, the owned objects are garbage collected as well.")]),e._v(" "),s("hr"),e._v(" "),e._m(31),e._v(" "),e._m(32),e._v(" "),s("p",[e._v("When a specified number of successful completion is reached, the job itself is complete.")]),e._v(" "),s("p",[e._v("Deleting a Job will clean up the pods it created.")]),e._v(" "),s("hr"),e._v(" "),e._m(33),e._v(" "),e._m(34),e._v(" "),e._m(35),e._v(" "),s("hr"),e._v(" "),e._m(36),e._v(" "),e._m(37),e._v(" "),e._m(38),e._v(" "),e._m(39),e._v(" "),s("hr"),e._v(" "),e._m(40),e._v(" "),e._m(41),e._v(" "),e._m(42),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("If the container dies or the node crashes, all files in the containers are gone.")]),e._v(" "),e._m(43),e._v(" "),e._m(44),e._v(" "),e._m(45),e._v(" "),s("hr"),e._v(" "),e._m(46),e._v(" "),e._m(47),e._v(" "),e._m(48),e._v(" "),e._m(49),e._v(" "),s("hr"),e._v(" "),e._m(50),e._v(" "),e._m(51),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("Kubernetes is a complicated system that has dozens of concepts.")]),e._v(" "),s("p",[e._v("The official document provides a complete guide to the concepts. "),s("a",{attrs:{href:"https://kubernetes.io/docs/concepts/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://kubernetes.io/docs/concepts/"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("Other resources that kill less your brain cells.")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://thenewstack.io/kubernetes-gets-childrens-book/",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"/static/images/kubernetes-in-a-nutshell-illustrated-guide-illustration-12.png",alt:"Kubernetes Gets a Childrenâ€™s Book"}}),s("OutboundLink")],1),e._v(" "),s("a",{attrs:{href:"https://thenewstack.io/kubernetes-gets-childrens-book/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kubernetes Gets a Children's Book"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://cloud.google.com/kubernetes-engine/kubernetes-comic/",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"/static/images/kubernetes-in-a-nutshell-smooth-sailing-with-k8s.png",alt:"Smooth Sailing with K8S"}}),s("OutboundLink")],1),e._v(" "),s("a",{attrs:{href:"https://cloud.google.com/kubernetes-engine/kubernetes-comic/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Smooth Sailing with k8s"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.mgasch.com/post/k8sevents/",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"/static/images/readings-2018-51-k8s-api-server-queues.png",alt:"kubernetes api server as event queue"}}),s("OutboundLink")],1),e._v(" "),s("a",{attrs:{href:"https://www.mgasch.com/post/k8sevents/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Events, the DNA of Kubernetes"),s("OutboundLink")],1)])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"kubernetes-in-a-nutshell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-in-a-nutshell","aria-hidden":"true"}},[this._v("#")]),this._v(" Kubernetes In a Nutshell")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Kubernetes")]),this._v(" is a system for running and coordinating containerized applications.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Master")]),this._v(" server(s) controls the entire cluster.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Nodes")]),this._v(" are the other servers in the cluster.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("As a Kubernetes user, you might most want to ask Kubernetes to "),t("strong",[this._v("run a container")]),this._v(" via HTTP APIs or CLI.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("In other words, you set a desired state to the "),t("strong",[this._v("Master")]),this._v(" server.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("Master")]),this._v(" server compares the desired state to the current state in the cluster and decides which node to run.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Node")]),this._v(" servers receive instructions from the "),t("strong",[this._v("Master")]),this._v(" server and then starts a container in the runtime.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Kubernetes runs applications and services in "),t("strong",[this._v("container runtime")]),this._v(" on every node.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Each node installs with a "),t("strong",[this._v("container runtime")]),this._v(", such as "),t("code",[this._v("docker")]),this._v(", "),t("code",[this._v("rkt")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("container runtime")]),this._v(" is responsible for starting and managing containers.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("container")]),this._v(" provides an isolated environment for running the application.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Except the container runtime, the "),t("strong",[this._v("Node")]),this._v(" server runs "),t("strong",[this._v("kubelet")]),this._v(" and "),t("strong",[this._v("kube-proxy")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Kubelet")]),this._v(" communicates to the "),t("strong",[this._v("master")]),this._v(" to receive desired states.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Kubelet")]),this._v(" controls the "),t("strong",[this._v("container runtime")]),this._v(" to launch or destroy containers to match the desired states.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Kube-proxy")]),this._v(" forwards requests to the containers, either in localhost or other hosts.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("As a Kubernetes user, you don't necessarily need to know the existence of "),t("strong",[this._v("kubelet")]),this._v(" and "),t("strong",[this._v("kube-proxy")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("Pod")]),this._v(" is one or more containers in a group that should always run on the same "),t("strong",[this._v("node")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("All containers in a "),t("strong",[this._v("pod")]),this._v(" are launched and destroyed together, or share a life cycle.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("All containers in a "),t("strong",[this._v("pod")]),this._v(" share their environments, volumes, and IP space.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Usually, there is one main container and some optional "),t("strong",[this._v("sidecar containers")]),this._v(" in a "),t("strong",[this._v("pod")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("As a Kubernetes user, you can show all pods in the cluster by typing "),t("code",[this._v("kubectl get pods")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("ReplicaSet")]),this._v(" is one or more pod replicas that are running at any given time.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("replica")]),this._v(" number in the "),t("strong",[this._v("ReplicaSet")]),this._v(" defines how many identical pods should be scheduled in the cluster.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If the "),t("strong",[this._v("replica")]),this._v(" number changes, the controller will start or destroy containers to match the desired number.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If a "),t("strong",[this._v("pod")]),this._v(" or underlying "),t("strong",[this._v("node")]),this._v(" dies, the controller will start a new "),t("strong",[this._v("pod")]),this._v(" in the cluster.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("Deployment")]),this._v(" is a desired state for "),t("strong",[this._v("ReplicaSets")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("deployment controller")]),this._v(" creates new replicasets for the rolling updates and then replaces the current replicaset.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("To support the ordering and uniqueness of Pods, Kubernetes offers "),t("strong",[this._v("StatefulSet")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("It creates a set of pods in the name like "),t("code",[this._v("db-0")]),this._v(", "),t("code",[this._v("db-1")]),this._v(", "),t("code",[this._v("db-2")]),this._v(", etc.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("To support such feature, Kubernetes offers "),t("strong",[this._v("DaemonSet")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("In case you have one-off jobs, Kubernetes offers "),t("strong",[this._v("Jobs")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("job")]),this._v(" creates one or more pods and ensures that a specified number of them successfully terminate.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("What if one pod wants to communicate to other pods? Kubernetes offers "),t("strong",[this._v("Services")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("Service")]),this._v(" is a component that acts as a basic internal load balancer for pods.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("Service")]),this._v(" exposes a group of pods as a single entity. When one pod communicates to a service, the service proxies the request to one of the backend pods.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("Service")]),this._v(" has a DNS A record.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For example, "),t("strong",[this._v("Service")]),this._v(' "foo" in namespace "default" has such domain: "foo.default.svc.cluster.local".')])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("Pod")]),this._v(" has a DNS A record as well.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For example, "),t("strong",[this._v("Pod")]),this._v(" with IP "),t("code",[this._v("10.81.1.101")]),this._v(' in the namespace "default" has such domain: "10-81-1-101.default.pod.cluster.local".')])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("What if one service wants to expose itself to the external world? Kubernetes offers "),t("strong",[this._v("Ingress")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Ingress")]),this._v(" exposes HTTP and HTTPS routes from outside the cluster to services within the cluster.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Ingress controller")]),this._v(" starts "),t("strong",[this._v("Ingress")]),this._v(" software, such as Nginx, F5, HAProxy, etc.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("To keep the data, Kubernetes provides "),t("strong",[this._v("Volumes")]),this._v(" for persisting on-disk files.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("Volume")]),this._v(" is just a directory, possibly with some data in it, which is accessible to the Containers in a Pod.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("When the container gets restarted, the "),t("strong",[this._v("volume")]),this._v(" is re-mounted into the container, and thus all data are recovered.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("PersistentVolume")]),this._v(" is a piece of storage in the cluster that has been pre-provisioned.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("PersistentVolume")]),this._v(" is a resource in the cluster just like a node is a cluster resource.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Often "),t("strong",[this._v("PersistentVolume")]),this._v(" uses cloud storage system like AWS EBS, Azure  Disk, GCE PD, etc.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("PersistentVolume")]),this._v(" makes the volume out of Pod life-cycle.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("strong",[this._v("PersistentVolumeClaim")]),this._v(" is a request for "),t("strong",[this._v("PersistentVolume")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Once a pod is done with a "),t("strong",[this._v("PersistentVolume")]),this._v(", the claim policy determines if the existing volume should be kept or removed.")])}],!1,null,null,null);t.default=n.exports}}]);