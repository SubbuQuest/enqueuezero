(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{252:function(e,t,r){"use strict";r.r(t);var a=r(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),r("p",[e._v("Heroku is a cloud platform as a service supporting several programming languages, including Java, Node.js, Scala, Clojure, Python, PHP, and Go.")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),r("mermaid",[e._v("\ngraph TB\n    router[HTTP Router]\n    router-- route --\x3edynos;\n    control_api-.control.->dynos\n    dynos --\x3e queueing\n    dynos --\x3e database\n    dynos --\x3e add-ons\n    dynos --\x3e health-check\n")]),e._v(" "),r("p",[e._v("Concepts:")]),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._m(10),e._v(" "),e._m(11),e._m(12),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),r("p",[e._v("Create a heroku app.")]),e._v(" "),e._m(16),r("p",[e._v("Set the build for the app.")]),e._v(" "),e._m(17),r("p",[e._v("Attach a database as an addon.")]),e._v(" "),e._m(18),r("p",[e._v("Set tag.")]),e._v(" "),e._m(19),e._m(20),e._v(" "),e._m(21),r("p",[e._v("Apply these changes.")]),e._v(" "),e._m(22),e._m(23),e._v(" "),r("p",[e._v("Heroku, www.heroku.com, "),r("a",{attrs:{href:"https://www.heroku.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.heroku.com/"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Heroku DevCenter, devcenter.heroku.com, "),r("a",{attrs:{href:"https://devcenter.heroku.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://devcenter.heroku.com/"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Building Docker Images with heroku.yml, devcenter.heroku.com, "),r("a",{attrs:{href:"https://devcenter.heroku.com/articles/build-docker-images-heroku-yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://devcenter.heroku.com/articles/build-docker-images-heroku-yml"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Container Registry & Runtime (Docker Deploys), devcenter.heroku.com, "),r("a",{attrs:{href:"https://devcenter.heroku.com/articles/container-registry-and-runtime",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://devcenter.heroku.com/articles/container-registry-and-runtime"),r("OutboundLink")],1)])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"create-production-environment-on-heroku"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-production-environment-on-heroku","aria-hidden":"true"}},[this._v("#")]),this._v(" Create Production Environment on Heroku")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"heroku-overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#heroku-overview","aria-hidden":"true"}},[this._v("#")]),this._v(" Heroku Overview")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Heroku was initially for supporting a Ruby framework "),t("code",[this._v("Rack")]),this._v(". Later on,  a new platform was launched with more and more programming languages supported.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"why-use-heroku"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#why-use-heroku","aria-hidden":"true"}},[this._v("#")]),this._v(" Why use Heroku?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Friendly APIs.")]),this._v(" "),t("li",[this._v("A large number of community-driven buildpacks let you write no build script.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"how-heroku-works"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-heroku-works","aria-hidden":"true"}},[this._v("#")]),this._v(" How Heroku Works?")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[e._v("Applications consist of your source code, a description of any dependencies, and a Procfile.")]),e._v(" "),r("li",[e._v("Buildpacks lie behind the slug compilation process. Buildpacks take your application, its dependencies, and the language runtime, and produce slugs.")]),e._v(" "),r("li",[e._v("Dynos are isolated, virtualized Unix containers, that provide the environment required to run an application.")]),e._v(" "),r("li",[e._v("Config vars contain customizable configuration data that can be changed independently of your source code. The configuration is exposed to a running application via environment variables.")]),e._v(" "),r("li",[e._v("Add-ons are third party, specialized, value-added cloud services that can be easily attached to an application, extending its functionality.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"deploy-to-heroku"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-to-heroku","aria-hidden":"true"}},[this._v("#")]),this._v(" Deploy to Heroku")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Create "),t("code",[this._v("Procfile")]),this._v(" in the root directory of the project.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("web: bin/runsvdir-dyno\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Create "),t("code",[this._v("Procfile.web")]),this._v(" alongside with "),t("code",[this._v("Procfile")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("dash: node app.js\napi: flask run --host=0.0.0.0 --port=5000\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Add "),t("code",[this._v("deploy/heroku/main.tf")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('provider "heroku" {}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Append variables to the "),t("code",[this._v("main.tf")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('variable "app-name" {\n  type = "string"\n}\n\nvariable "app-version" {\n  type = "string"\n}\n\nvariable "database-plan" {\n  type = "string"\n  default = "hobby-dev"\n}\n\nvariable "region" {\n  type = "string"\n  default = "us"\n}\n\nvariable "github-client-id" {\n  type = "string"\n}\n\nvariable "github-client-secret" {\n  type = "string"\n}\n\nvariable "github-redirect-uri" {\n  type = "string"\n}\n\nvariable "secret-key" {\n  type = "string"\n}\n\nvariable "git-url" {\n  type = "string"\n  default = "git@github.com:soasme/tomato-coffee.git"\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('resource "heroku_app" "app" {\n    name = "${var.app-name}"\n    region = "${var.region}"\n\n    # PORT, DATABASE_URI are injected by heroku\n    config_vars {\n        SECRET_KEY = "${var.secret-key}"\n        GITHUB_CLIENT_ID = "${var.github-client-id}"\n        GITHUB_CLIENT_SECRET = "${var.github-client-secret}"\n        GITHUB_REDIRECT_URI = "${var.github-redirect-uri}"\n    }\n\n    buildpacks = [\n      "heroku/python",\n      "heroku/nodejs",\n      "https://github.com/dpiddy/heroku-buildpack-runit.git",\n    ]\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('resource "heroku_build" "app" {\n  app        = "${heroku_app.app.id}"\n\n  source = {\n    # This app uses a community buildpack, set it in `buildpacks` above.\n    url     = "https://github.com/soasme/tomato-coffee/archive/${var.app-version}.tar.gz"\n    version = "${var.app-version}"\n  }\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('resource "heroku_addon" "database" {\n  app  = "${heroku_app.app.name}"\n  plan = "heroku-postgresql:${var.database-plan}"\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ git tag v0.1.0\n$ git push origin v0.1.0\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Prepare a configuration file "),t("code",[this._v("deploy/heroku/terraform.tfvars")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('app-name = "tomato-coffee"\napp-version = "v0.1.0"\nsecret-key = "amguztlmqbxmgjgoqhdwiufwflobvkip"\nregion = "us"\ngithub-client-id = "rvxsjzkyhvmjjklq"\ngithub-client-secret = "yqvprfofssgealeeqlafqkwghlxacxva"\ngithub-redirect-uri = "https://tomato-coffee.herokuapp.com/auth/github/callback"\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ terraform apply\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references","aria-hidden":"true"}},[this._v("#")]),this._v(" References")])}],!1,null,null,null);t.default=n.exports}}]);