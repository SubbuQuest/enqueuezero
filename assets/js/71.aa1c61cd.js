(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{255:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("Continuous Integration (CI) is a development practice that requires developers to integrate code into a shared repository several times a day.")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("Appveyor is a Continuous Integration solution for Windows and Linux.")]),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("Drone is a Continuous Delivery platform built on Docker, written in Go.")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),a("p",[t._v("Enable the Travis job from the Travis CI website.")]),t._v(" "),t._m(12),t._v(" "),t._m(13),a("p",[t._v("Add the file to the code base and push it to upstream.")]),t._v(" "),t._m(14),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),a("p",[t._v("Add the file to the code base and push it to upstream again.")]),t._v(" "),t._m(18),a("p",[t._v("You should see the repository on Travis CI getting triggered again and with a new environment added.")]),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),a("p",[t._v("Login.")]),t._v(" "),t._m(23),a("p",[t._v("Set build env.")]),t._v(" "),t._m(24),t._m(25),t._v(" "),t._m(26),t._m(27),t._v(" "),t._m(28),a("p",[t._v("Commit the file and push it again.")]),t._v(" "),t._m(29),a("p",[t._v("You should now see the build log of latest build.")]),t._v(" "),t._m(30),a("p",[t._v("Then, we perform a git tag to trigger a tagged build.")]),t._v(" "),t._m(31),a("p",[t._v("The newly triggered build should run all tests and then push a docker image to the docker registry. After the build, the docker registry should create a page like "),a("a",{attrs:{href:"https://hub.docker.com/r/soasme/tomato-coffee",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/soasme/tomato-coffee"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),a("p",[t._v("Continuous Integration has two major tasks: run tests and build artifacts.")]),t._v(" "),t._m(34),t._v(" "),a("p",[t._v("Continuous Integration, www.thoughtworks.com, "),a("a",{attrs:{href:"https://www.thoughtworks.com/continuous-integration",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.thoughtworks.com/continuous-integration"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Building a Python Project, docs.travis-ci.com, "),a("a",{attrs:{href:"https://docs.travis-ci.com/user/languages/python/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.travis-ci.com/user/languages/python/"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Using Docker in Builds, docs.travis-ci.com, "),a("a",{attrs:{href:"https://docs.travis-ci.com/user/docker/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.travis-ci.com/user/docker/"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("travis-ci/travis.rb, github.com, "),a("a",{attrs:{href:"https://github.com/travis-ci/travis.rb",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/travis-ci/travis.rb"),a("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"continuous-integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#continuous-integration","aria-hidden":"true"}},[this._v("#")]),this._v(" Continuous Integration")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"what-is-continuous-integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-is-continuous-integration","aria-hidden":"true"}},[this._v("#")]),this._v(" What is Continuous Integration")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"why-ci-is-important"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-ci-is-important","aria-hidden":"true"}},[this._v("#")]),this._v(" Why CI is important?")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("It's cheap.")]),t._v(" "),a("li",[t._v("Fast integration.")]),t._v(" "),a("li",[t._v("Catch issues early.")]),t._v(" "),a("li",[t._v("Less code change to debug when having problem.")]),t._v(" "),a("li",[t._v("Deploy the code more rapidly.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"solutions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#solutions","aria-hidden":"true"}},[this._v("#")]),this._v(" Solutions")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"travis-ci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci","aria-hidden":"true"}},[this._v("#")]),this._v(" Travis CI")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins","aria-hidden":"true"}},[this._v("#")]),this._v(" Jenkins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"circleci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#circleci","aria-hidden":"true"}},[this._v("#")]),this._v(" CircleCI")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"appveyor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#appveyor","aria-hidden":"true"}},[this._v("#")]),this._v(" Appveyor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"drone"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#drone","aria-hidden":"true"}},[this._v("#")]),this._v(" Drone")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"perform-tests-by-travis-ci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#perform-tests-by-travis-ci","aria-hidden":"true"}},[this._v("#")]),this._v(" Perform Tests by Travis CI")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"trigger-the-first-build"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trigger-the-first-build","aria-hidden":"true"}},[this._v("#")]),this._v(" Trigger the First Build")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Add "),s("code",[this._v(".travis.yml")]),this._v(" to the root directory of the project.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sudo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("yarn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directories")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" node_modules\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn install\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn test\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn run build\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ git add .travis.yml\n$ git commit -m'add .travis.yml'\n$ git push origin master\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"introduce-matrix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduce-matrix","aria-hidden":"true"}},[this._v("#")]),this._v(" Introduce Matrix")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Modify "),s("code",[this._v(".travis.yml")]),this._v(".")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("matrix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("include")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sudo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("yarn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directories")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" node_modules\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn install\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn test\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn run build\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" python\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dist")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xenial\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("python")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3.7"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sudo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" pip install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r requirements.txt\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" pip install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("requirements.txt\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" py.test tests\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ git add .travis.yml\n$ git commit -m'specify the stable release of Python 3.7 on travis Xenial for api test.'\n$ git push origin master\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/static/images/hands-on-cloud-native-ci-travis-job-python-api.png",alt:"api job added"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"build-docker-image"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-docker-image","aria-hidden":"true"}},[this._v("#")]),this._v(" Build Docker Image")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Install "),s("code",[this._v("travis")]),this._v(" CLI.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ brew "),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" travis\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("travis login --auto\nWe need your GitHub login to identify you.\nThis information will not be sent to Travis CI, only to api.github.com.\nThe password will not be displayed.\n\nTry running with --github-token or --auto "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" you don't want to enter your password anyway.\n\nUsername: soasme\nPassword "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" soasme: ********************************\nTwo-factor authentication code "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" soasme: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("306042")]),t._v("\nSuccessfully logged "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" as soasme"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ travis "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" DOCKER_USERNAME soasme\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" setting environment variable "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_USERNAME")]),t._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" -s DOCKER_PASSWORD "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Input your password and type enter.")]),t._v("\n\n$ travis "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" DOCKER_PASSWORD "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_PASSWORD")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" setting environment variable "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_PASSWORD")]),t._v("\n\n$ travis "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" DOCKER_IMAGE_NAME soasme/tomato-coffee\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" setting environment variable "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_IMAGE_NAME")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Modify "),s("code",[this._v(".travis.yml")]),this._v(".")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("matrix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("include")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sudo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("yarn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directories")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" node_modules\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn install\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn test\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn run build\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" python\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dist")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xenial\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("python")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3.7"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sudo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" pip install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r requirements.txt\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" pip install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("requirements.txt\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" py.test tests\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" docker\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" script\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bash scripts/docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("push\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tags")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Add file "),s("code",[this._v("scripts/docker-push")]),this._v(".")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_PASSWORD")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" docker login -u "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_USERNAME")]),t._v('"')]),t._v(" --password-stdin\n\ndocker build -f ./dockerfiles/api.dockerfile -t "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_IMAGE_NAME")]),t._v(":latest "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" -z "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TRAVIS_TAG")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    docker tag "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_IMAGE_NAME")]),t._v(":latest "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_IMAGE_NAME")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TRAVIS_TAG")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" docker push "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DOCKER_IMAGE_NAME")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" .travis.yml scripts/docker-push\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build docker image on travis ci.'")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin master\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("Skipping a deployment with the script provider because this is not a tagged commit\n\nDone. Your build exited with 0.\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ git tag v0.2.4\n$ git push origin v0.2.4\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/static/images/hands-on-cloud-native-ci-docker-hub.png",alt:"docker hub"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#summary","aria-hidden":"true"}},[this._v("#")]),this._v(" Summary")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"references"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#references","aria-hidden":"true"}},[this._v("#")]),this._v(" References")])}],!1,null,null,null);s.default=n.exports}}]);