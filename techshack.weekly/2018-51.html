<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EnqueueZero Techshack 2018-51 | Enqueue Zero</title>
    <meta name="description" content="Enqueue Zero is publishing code principles.">
    
    
    <link rel="preload" href="/assets/css/0.styles.c96f0afb.css" as="style"><link rel="preload" href="/assets/js/app.cf628e2c.js" as="script"><link rel="preload" href="/assets/js/120.54870231.js" as="script"><link rel="preload" href="/assets/js/5.487c1af3.js" as="script"><link rel="prefetch" href="/assets/js/10.6a56909d.js"><link rel="prefetch" href="/assets/js/100.a12fa14d.js"><link rel="prefetch" href="/assets/js/101.22ce2529.js"><link rel="prefetch" href="/assets/js/102.3edc023d.js"><link rel="prefetch" href="/assets/js/103.aae211b5.js"><link rel="prefetch" href="/assets/js/104.5729672b.js"><link rel="prefetch" href="/assets/js/105.de55b824.js"><link rel="prefetch" href="/assets/js/106.028c7731.js"><link rel="prefetch" href="/assets/js/107.613cefca.js"><link rel="prefetch" href="/assets/js/108.318e2864.js"><link rel="prefetch" href="/assets/js/109.1f37cebb.js"><link rel="prefetch" href="/assets/js/11.ee4e6e2c.js"><link rel="prefetch" href="/assets/js/110.eb9cb965.js"><link rel="prefetch" href="/assets/js/111.d80b2b17.js"><link rel="prefetch" href="/assets/js/112.6b4887be.js"><link rel="prefetch" href="/assets/js/113.2aaa51e0.js"><link rel="prefetch" href="/assets/js/114.643c3464.js"><link rel="prefetch" href="/assets/js/115.c021d926.js"><link rel="prefetch" href="/assets/js/116.1c342f7f.js"><link rel="prefetch" href="/assets/js/117.dadd54b8.js"><link rel="prefetch" href="/assets/js/118.ef47cff2.js"><link rel="prefetch" href="/assets/js/119.842e0bc9.js"><link rel="prefetch" href="/assets/js/12.b3e66443.js"><link rel="prefetch" href="/assets/js/121.d1871aa5.js"><link rel="prefetch" href="/assets/js/122.a3fa8c8a.js"><link rel="prefetch" href="/assets/js/123.17ef19fc.js"><link rel="prefetch" href="/assets/js/124.f98764e0.js"><link rel="prefetch" href="/assets/js/125.05b8f148.js"><link rel="prefetch" href="/assets/js/126.8e8cec71.js"><link rel="prefetch" href="/assets/js/127.8f073d6d.js"><link rel="prefetch" href="/assets/js/128.2c37220b.js"><link rel="prefetch" href="/assets/js/129.945fa4c7.js"><link rel="prefetch" href="/assets/js/13.ec29e50f.js"><link rel="prefetch" href="/assets/js/130.ac2d6f1f.js"><link rel="prefetch" href="/assets/js/131.980d7464.js"><link rel="prefetch" href="/assets/js/132.44a3afca.js"><link rel="prefetch" href="/assets/js/133.0333b205.js"><link rel="prefetch" href="/assets/js/134.90425b6c.js"><link rel="prefetch" href="/assets/js/135.df0c1677.js"><link rel="prefetch" href="/assets/js/136.65629541.js"><link rel="prefetch" href="/assets/js/137.a38aa087.js"><link rel="prefetch" href="/assets/js/138.c5615a2b.js"><link rel="prefetch" href="/assets/js/139.e340116c.js"><link rel="prefetch" href="/assets/js/14.5ddbc643.js"><link rel="prefetch" href="/assets/js/140.399bba23.js"><link rel="prefetch" href="/assets/js/141.661fc310.js"><link rel="prefetch" href="/assets/js/142.dcc59728.js"><link rel="prefetch" href="/assets/js/143.c86a462a.js"><link rel="prefetch" href="/assets/js/144.d576cca4.js"><link rel="prefetch" href="/assets/js/145.8d020e4c.js"><link rel="prefetch" href="/assets/js/146.e4d073cb.js"><link rel="prefetch" href="/assets/js/147.b0987282.js"><link rel="prefetch" href="/assets/js/148.fe093780.js"><link rel="prefetch" href="/assets/js/149.bb5f2be5.js"><link rel="prefetch" href="/assets/js/15.cb85b6fd.js"><link rel="prefetch" href="/assets/js/150.786218ee.js"><link rel="prefetch" href="/assets/js/151.778339ef.js"><link rel="prefetch" href="/assets/js/152.7417ae60.js"><link rel="prefetch" href="/assets/js/153.e9dbea0b.js"><link rel="prefetch" href="/assets/js/154.dc2b4de6.js"><link rel="prefetch" href="/assets/js/16.6a1e2274.js"><link rel="prefetch" href="/assets/js/17.fd36087a.js"><link rel="prefetch" href="/assets/js/18.168c46a3.js"><link rel="prefetch" href="/assets/js/19.f3e7fe90.js"><link rel="prefetch" href="/assets/js/2.8d365153.js"><link rel="prefetch" href="/assets/js/20.f0cfbb18.js"><link rel="prefetch" href="/assets/js/21.ad9f0c76.js"><link rel="prefetch" href="/assets/js/22.80066592.js"><link rel="prefetch" href="/assets/js/23.af4ba02e.js"><link rel="prefetch" href="/assets/js/24.fae8ace0.js"><link rel="prefetch" href="/assets/js/25.35cb6d5d.js"><link rel="prefetch" href="/assets/js/26.836800e5.js"><link rel="prefetch" href="/assets/js/27.37e59286.js"><link rel="prefetch" href="/assets/js/28.1cf5f9d2.js"><link rel="prefetch" href="/assets/js/29.958627af.js"><link rel="prefetch" href="/assets/js/3.a3fe37c5.js"><link rel="prefetch" href="/assets/js/30.78d39819.js"><link rel="prefetch" href="/assets/js/31.40989936.js"><link rel="prefetch" href="/assets/js/32.40ba7bf1.js"><link rel="prefetch" href="/assets/js/33.c269169e.js"><link rel="prefetch" href="/assets/js/34.6190fa21.js"><link rel="prefetch" href="/assets/js/35.997a2630.js"><link rel="prefetch" href="/assets/js/36.4a99c25c.js"><link rel="prefetch" href="/assets/js/37.95f1c818.js"><link rel="prefetch" href="/assets/js/38.08c40011.js"><link rel="prefetch" href="/assets/js/39.57a3c0d8.js"><link rel="prefetch" href="/assets/js/4.4f66e2d5.js"><link rel="prefetch" href="/assets/js/40.f11ff556.js"><link rel="prefetch" href="/assets/js/41.4b0e7fec.js"><link rel="prefetch" href="/assets/js/42.d9588bdb.js"><link rel="prefetch" href="/assets/js/43.da6e7c53.js"><link rel="prefetch" href="/assets/js/44.ffbb1244.js"><link rel="prefetch" href="/assets/js/45.8e1f9ad9.js"><link rel="prefetch" href="/assets/js/46.50186207.js"><link rel="prefetch" href="/assets/js/47.2faa306d.js"><link rel="prefetch" href="/assets/js/48.0590641a.js"><link rel="prefetch" href="/assets/js/49.5563663c.js"><link rel="prefetch" href="/assets/js/50.a22a98ff.js"><link rel="prefetch" href="/assets/js/51.9dc6d5d1.js"><link rel="prefetch" href="/assets/js/52.abf527a6.js"><link rel="prefetch" href="/assets/js/53.a6433fe5.js"><link rel="prefetch" href="/assets/js/54.f39dafb1.js"><link rel="prefetch" href="/assets/js/55.1e8902c2.js"><link rel="prefetch" href="/assets/js/56.49cb844b.js"><link rel="prefetch" href="/assets/js/57.73e5a82d.js"><link rel="prefetch" href="/assets/js/58.f1ca3ceb.js"><link rel="prefetch" href="/assets/js/59.d62e8fd3.js"><link rel="prefetch" href="/assets/js/6.21dcb9f2.js"><link rel="prefetch" href="/assets/js/60.60abc846.js"><link rel="prefetch" href="/assets/js/61.6409cbd4.js"><link rel="prefetch" href="/assets/js/62.3d696fc6.js"><link rel="prefetch" href="/assets/js/63.79a79167.js"><link rel="prefetch" href="/assets/js/64.5aa8065c.js"><link rel="prefetch" href="/assets/js/65.17ba2c01.js"><link rel="prefetch" href="/assets/js/66.a793dfd9.js"><link rel="prefetch" href="/assets/js/67.f4ce6970.js"><link rel="prefetch" href="/assets/js/68.71c36e8f.js"><link rel="prefetch" href="/assets/js/69.475d4399.js"><link rel="prefetch" href="/assets/js/7.ff15f4df.js"><link rel="prefetch" href="/assets/js/70.73a7ff67.js"><link rel="prefetch" href="/assets/js/71.aa1c61cd.js"><link rel="prefetch" href="/assets/js/72.9cd0ff48.js"><link rel="prefetch" href="/assets/js/73.e2af4058.js"><link rel="prefetch" href="/assets/js/74.04792ad8.js"><link rel="prefetch" href="/assets/js/75.0e66ae13.js"><link rel="prefetch" href="/assets/js/76.ec524056.js"><link rel="prefetch" href="/assets/js/77.c5dcea91.js"><link rel="prefetch" href="/assets/js/78.221a93b1.js"><link rel="prefetch" href="/assets/js/79.b1d0a709.js"><link rel="prefetch" href="/assets/js/8.0e400748.js"><link rel="prefetch" href="/assets/js/80.155f5152.js"><link rel="prefetch" href="/assets/js/81.c69f4948.js"><link rel="prefetch" href="/assets/js/82.41a3c9ca.js"><link rel="prefetch" href="/assets/js/83.968ea699.js"><link rel="prefetch" href="/assets/js/84.2ca53d4e.js"><link rel="prefetch" href="/assets/js/85.12ff3093.js"><link rel="prefetch" href="/assets/js/86.b77090c2.js"><link rel="prefetch" href="/assets/js/87.f9e0727b.js"><link rel="prefetch" href="/assets/js/88.6fa85a32.js"><link rel="prefetch" href="/assets/js/89.01cc619c.js"><link rel="prefetch" href="/assets/js/9.a52e4c8a.js"><link rel="prefetch" href="/assets/js/90.5211731d.js"><link rel="prefetch" href="/assets/js/91.52767f1b.js"><link rel="prefetch" href="/assets/js/92.6d373921.js"><link rel="prefetch" href="/assets/js/93.75608a6f.js"><link rel="prefetch" href="/assets/js/94.3ebc6dee.js"><link rel="prefetch" href="/assets/js/95.dfbacf62.js"><link rel="prefetch" href="/assets/js/96.6f9ccb49.js"><link rel="prefetch" href="/assets/js/97.8f06b6b0.js"><link rel="prefetch" href="/assets/js/98.50266cf3.js"><link rel="prefetch" href="/assets/js/99.2cf514ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c96f0afb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Enqueue Zero</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/soasme/enqueuezero" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/soasme/enqueuezero" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>EnqueueZero Techshack 2018-51</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/techshack.weekly/2018-51.html#status-site" class="sidebar-link">Status Site</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#availability" class="sidebar-link">Availability</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#_5-ways-facebook-improved-compression-at-scale-with-zstandard" class="sidebar-link">5 ways Facebook improved compression at scale with Zstandard</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#how-does-setstate-know-what-to-do" class="sidebar-link">How Does setState Know What to Do?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#scheduler-algorithm-in-kubernetes" class="sidebar-link">Scheduler Algorithm in Kubernetes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#the-kubernetes-scheduler" class="sidebar-link">The Kubernetes Scheduler</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#the-dry-principle-its-cost-explained-with-examples" class="sidebar-link">The DRY Principle: Its Cost Explained with Examples</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#events-the-dna-of-kubernetes" class="sidebar-link">Events, the DNA of Kubernetes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#what-is-http-3" class="sidebar-link">What is HTTP/3 ?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#microservices-are-for-humans-not-machines" class="sidebar-link">Microservices are for humans, not machines</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#does-the-service-mesh-spell-the-end-for-middleware" class="sidebar-link">Does the Service Mesh spell the end for Middleware?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#visualizing-systems-with-statemaps" class="sidebar-link">Visualizing Systems with Statemaps</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#airbnb-soa-migration" class="sidebar-link">Airbnb SOA Migration</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#evolution-of-application-data-caching-from-ram-to-ssd" class="sidebar-link">Evolution of Application Data Caching: From RAM to SSD</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#implementing-the-netflix-media-database" class="sidebar-link">Implementing the Netflix Media Database</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#loki" class="sidebar-link">Loki</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#docker-app" class="sidebar-link">Docker App</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#what-is-cnab" class="sidebar-link">What is CNAB?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#cnab-spec" class="sidebar-link">CNAB Spec</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#rakanalh-scheduler" class="sidebar-link">rakanalh/scheduler</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2018-51.html#refactor-large-functions" class="sidebar-link">Refactor Large Functions</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="enqueuezero-techshack-2018-51"><a href="#enqueuezero-techshack-2018-51" aria-hidden="true" class="header-anchor">#</a> EnqueueZero Techshack 2018-51</h1> <div class="techshack-header"><p>Kia ora! I am the creator of <strong>Enqueue Zero</strong> (<a href="https://enqueuezero.com">https://enqueuezero.com</a>), a site that explains code principles to Developers/DevOps/Sysadmins. This site is updated under a single man team since 2018. The `EnqueueZero Techshack` series is comprised of a bunch of interesting posts I wrote or found on the Internet. More importantly, I hope these posts would please you.</p><p></p><div><p>
      Please follow Twitter account <a href="https://twitter.com/enqueuezero">@enqueuezero</a> for the updates.  Happy exploring!
    </p></div></div> <h2 id="status-site"><a href="#status-site" aria-hidden="true" class="header-anchor">#</a> Status Site</h2> <p>✨ <a href="https://enqueuezero.com/status-site.html" target="_blank" rel="noopener noreferrer">enqueuezero.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ✨</p> <p>The status site is an individual website listing the particular component statuses that make up the product.</p> <p>It shows below two information:</p> <ul><li>Display the status of each function of the business.</li> <li>Display A list of incidents organized on a daily basis. If nothing happens, show &quot;No incidents reported.&quot;, otherwise, show the details of the incidents, such as when the incidents were detected, how the incidents were handled, and when the incidents were resolved.</li></ul> <p>It has below goals:</p> <ul><li>Show how reliable the platform is.</li> <li>Show how well the platform is recovering from failure.</li> <li>Show how performance is as it evolves.</li></ul> <p>The status site shows the statuses of components of the product. It's about to be transparent to users. Users know exactly where to look where there is downtime and staffs will be acting on the information they know is up-to-date.</p> <h2 id="availability"><a href="#availability" aria-hidden="true" class="header-anchor">#</a> Availability</h2> <p>✨ <a href="https://enqueuezero.com/availability.html" target="_blank" rel="noopener noreferrer">enqueuezero.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ✨</p> <p>The availability clearly defines how well the system succeeds in providing services to the customers. Improving the availability of the service is hard. Note that the important thing is not to deliver the agreed SLA but to happy customers. If the numbers are good, but customers are not satisfied, then you need to reconsider the whole thing, set the right measurement target, and validate that again.</p> <h2 id="_5-ways-facebook-improved-compression-at-scale-with-zstandard"><a href="#_5-ways-facebook-improved-compression-at-scale-with-zstandard" aria-hidden="true" class="header-anchor">#</a> 5 ways Facebook improved compression at scale with Zstandard</h2> <p><a href="https://code.fb.com/core-data/zstandard/" target="_blank" rel="noopener noreferrer">code.fb.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Use Case: Compress hundreds of gigabytes of data for backup<br>
Combining <code>-T</code>, <code>--long</code>, <code>--adapt</code> is perfect for server backups.
<ul><li>MultiThreaded Compression. Use <code>-T0</code> option to enable on all the available cores.</li> <li><a href="https://github.com/facebook/zstd/releases/tag/v1.3.2" target="_blank" rel="noopener noreferrer">Long Range Mode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (<code>--long</code>). Long range mode is a serial preprocessor which finds large matches and passes the rest to a parallel zstd backend.
<img src="/static/images/readings-2018-51-zstd-long-range-mode.png" alt="Long Range Mode"></li> <li>Automatic Level Determination (<code>--adapt</code>). Adaptive mode measures the speed of the input and output files, or pipes, and adjusts the compression level to match the bottleneck.</li></ul></li> <li>Use Case: Compress data in warehouse?\
<ul><li>Increaseing Block Size to 256KB intead of the default 32KB generates significant incremental compression benefits.</li></ul></li> <li>Use Case: Compressed filesystems.
<ul><li>Added zstd support to SquashFS in read-only cases.</li> <li>Added zstd support to Btrfs in copy-on-write cases.</li></ul></li> <li>Use Case: Databases.
<ul><li>Hybrid compression: <a href="http://myrocks.io/" target="_blank" rel="noopener noreferrer">MyRocks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is MySQL on RocksDB, <a href="https://instagram-engineering.com/open-sourcing-a-10x-reduction-in-apache-cassandra-tail-latency-d64f86b43589" target="_blank" rel="noopener noreferrer">Rocksandra<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is Cassandra on RocksDB, and ZippyDB is an internal database built on top of RocksDB..</li> <li>Dictionary Compression: Analyze sample data, presume that the rest of the data to compress will be similar..Once the patterns have been captured, the dictionary assumes future data will be similar and begins compression immediately.</li></ul></li> <li>Use Case:  Managed Compression
<ul><li>To overcome the dictionary becoming stateful, <code>zstd --train</code> is introduced for pre-generating states. It simplifies the interfaces by keeping using <code>compress()</code> / <code>decompress()</code>.
<img src="/static/images/readings-2018-51-zstd-manage-dictionaries.png" alt="Application Dictionary Compression Life-Cycle"></li></ul></li></ul> <h2 id="how-does-setstate-know-what-to-do"><a href="#how-does-setstate-know-what-to-do" aria-hidden="true" class="header-anchor">#</a> How Does setState Know What to Do?</h2> <p><a href="https://overreacted.io/how-does-setstate-know-what-to-do/" target="_blank" rel="noopener noreferrer">overreacted.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Q: When you call setState in a component, what do you think happens?<br>
A: Every renderer sets a special field on the created class. This field is called <code>updater</code>.</p> <div class="language-javascript extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-javascript"><code><span class="token comment">// // Inside React DOM</span>
<span class="token keyword">const</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inst<span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
inst<span class="token punctuation">.</span>updater <span class="token operator">=</span> ReactDOMUpdater<span class="token punctuation">;</span>

<span class="token comment">// Inside React DOM Server</span>
<span class="token keyword">const</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inst<span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
inst<span class="token punctuation">.</span>updater <span class="token operator">=</span> ReactDOMServerUpdater<span class="token punctuation">;</span>

<span class="token comment">// Inside React Native</span>
<span class="token keyword">const</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inst<span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
inst<span class="token punctuation">.</span>updater <span class="token operator">=</span> ReactNativeUpdater<span class="token punctuation">;</span>

<span class="token comment">// A bit simplified</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">partialState<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Use the `updater` field to talk back to the renderer!</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>updater<span class="token punctuation">.</span><span class="token function">enqueueSetState</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> partialState<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="scheduler-algorithm-in-kubernetes"><a href="#scheduler-algorithm-in-kubernetes" aria-hidden="true" class="header-anchor">#</a> Scheduler Algorithm in Kubernetes</h2> <p><a href="https://github.com/kubernetes/community/blob/master/contributors/devel/scheduler_algorithm.md" target="_blank" rel="noopener noreferrer">github.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>This document explains how to select a node for a Pod unscheduled. The two steps are:</p> <ol><li>Filter nodes that do not meet certain requirements of the Pod. It could due to below reasons:
<ul><li>No disk, no volume zone, or maximum volumes count reached.</li> <li>No CPU, no memory.</li> <li>HostPort already occupied.</li> <li>HostName not match, Label not match.</li> <li>Node is reporting memory/disk pressure.</li></ul></li> <li>Rank the remaining nodes to find the best fit.
<ul><li>The prioritization is performed by a set of priority functions.</li> <li>A prioritization function return 0 to 10, signifies from least preferred to most preferred.</li> <li><code>finalScoreNodeA = (weight1 * priorityFunc1) + (weight2 * priorityFunc2) + ...</code></li> <li>Altorithms:
<ul><li>Least requested</li> <li>Balance resource</li> <li>Minimizing the number of Pods on the same node.</li> <li>Prefer nodes with image pulled already.</li> <li>Node affinity</li></ul></li></ul></li></ol> <h2 id="the-kubernetes-scheduler"><a href="#the-kubernetes-scheduler" aria-hidden="true" class="header-anchor">#</a> The Kubernetes Scheduler</h2> <p><a href="https://github.com/kubernetes/community/blob/master/contributors/devel/scheduler.md" target="_blank" rel="noopener noreferrer">github.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>The Kubernetes scheduler runs as a process alongside the other master components such as the API server.</p> <p>Predicates are a set of policies applied one by one to filter out inappropriate nodes.</p> <p>Priorities are a set of policies applied one by one to rank nodes (that made it through the filter of the predicates).</p> <div class="language- extra-class"><pre class="language-text"><code>For given pod:

    +---------------------------------------------+
    |               Schedulable nodes:            |
    |                                             |
    | +--------+    +--------+      +--------+    |
    | | node 1 |    | node 2 |      | node 3 |    |
    | +--------+    +--------+      +--------+    |
    |                                             |
    +-------------------+-------------------------+
                        |
                        |
                        v
    +-------------------+-------------------------+

    Pred. filters: node 3 doesn't have enough resource

    +-------------------+-------------------------+
                        |
                        |
                        v
    +-------------------+-------------------------+
    |             remaining nodes:                |
    |   +--------+                 +--------+     |
    |   | node 1 |                 | node 2 |     |
    |   +--------+                 +--------+     |
    |                                             |
    +-------------------+-------------------------+
                        |
                        |
                        v
    +-------------------+-------------------------+

    Priority function:    node 1: p=2
                          node 2: p=5

    +-------------------+-------------------------+
                        |
                        |
                        v
            select max{node priority} = node 2
</code></pre></div><h2 id="the-dry-principle-its-cost-explained-with-examples"><a href="#the-dry-principle-its-cost-explained-with-examples" aria-hidden="true" class="header-anchor">#</a> The DRY Principle: Its Cost Explained with Examples</h2> <p><a href="http://web-techno.net/dry-principle-explained/" target="_blank" rel="noopener noreferrer">web-techno.net<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Knowledge duplication is always a DRY principle violation.</li> <li>Code duplication doesn’t necessarily mean violation of the DRY principle.
<ul><li>Trying to apply DRY everywhere can have two results: Unnecessary coupling &amp; Unnecessary complexity.</li></ul></li> <li>DRY states that you shouldn’t duplicate knowledge, not that you should code to be able to reuse everything.</li> <li>DRY is a principle, not a rule. Everything has a cost in development. DRY is no exception. Obviously you shouldn't repeat your business logic all over the place, but you shouldn't neither tightly couple everything because you don’t want to repeat your code.</li> <li>Be careful not to extract your duplicate code and make everything depend on it.</li></ul> <h2 id="events-the-dna-of-kubernetes"><a href="#events-the-dna-of-kubernetes" aria-hidden="true" class="header-anchor">#</a> Events, the DNA of Kubernetes</h2> <p><a href="https://www.mgasch.com/post/k8sevents/" target="_blank" rel="noopener noreferrer">mgasch.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Kubernetes: Autonomous processes reacting to events from the API server.</li> <li>Processes: Control loops (observe -&gt; analyze -&gt; act), or producers and/or consumers of events (consumers can be producers as well, and vice versa), including the scheduler, deployment controller, endpoint controller, Kubelet, etc.</li> <li>Event: an immutable fact that happened, e.g. &quot;pod created&quot;.</li> <li>API server: an immutable (replicated) log (or queue), each representing a stream of events.</li> <li>Object &amp; Namespace: a dedicated (virtual) event queue the API server handles.</li></ul> <p><img src="/static/images/readings-2018-51-k8s-api-server-queues.png" alt="API Server Event Queues"></p> <h2 id="what-is-http-3"><a href="#what-is-http-3" aria-hidden="true" class="header-anchor">#</a> What is HTTP/3 ?</h2> <p><a href="https://dev.to/grigorkh/what-is-http3--4pib" target="_blank" rel="noopener noreferrer">dev.to<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>HTTP/3 = HTTP-over-QUIC.</p> <p>QUIC ( Quick UDP Internet Connections) is a new transport which reduces latency compared to that of TCP.
It uses fewer handshakes, improves forward error correction and congestion control, and avoids HoL blocking.</p> <p><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0hlAeTAi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2Ar6NNOhOGncUfvHXKHUM39w.gif" alt></p> <p>At old times, the Internet sucks, and so TCP protocol set a large timeout and window.
Everything has changed except the timeout is still 20 seconds nowadays.
If you kill a TCP socket that hangs for 5 seconds, your OS will still leave it open until the 20 seconds expired, consuming system resources.</p> <h2 id="microservices-are-for-humans-not-machines"><a href="#microservices-are-for-humans-not-machines" aria-hidden="true" class="header-anchor">#</a> Microservices are for humans, not machines</h2> <p><a href="https://medium.com/@odedia/microservices-are-for-humans-not-machines-721a6a56344f" target="_blank" rel="noopener noreferrer">medium.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>This post explores the organizational and cultural benefits of moving to a microservices architecture.</p> <p>The advantage is the ability to scale each microservice in isolation, based on its specific load requirements.
The disadvantage is distributed systems are hard.</p> <p>From an organizational perspective, it leads to smaller (and more maintainable) code repos, clearer boundaries between teams, etc.</p> <p>One of the goals of microservices architecture is to let development teams achieve better results.</p> <p>The author thinks starting from monolithic and moving to microservices when it makes sense.</p> <h2 id="does-the-service-mesh-spell-the-end-for-middleware"><a href="#does-the-service-mesh-spell-the-end-for-middleware" aria-hidden="true" class="header-anchor">#</a> Does the Service Mesh spell the end for Middleware?</h2> <p><a href="https://www.cloudops.com/2018/09/does-the-service-mesh-spell-the-end-for-middleware/" target="_blank" rel="noopener noreferrer">www.cloudops.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>The short answer is NOT until a framework of DevOps toolings and practices is put in place.</p> <ul><li>Middleware works by flying messages from various applications into centralized pools of communication. These messages are then carried through a pipeline of functions, ending with the user registry service. Messages are transported on enterprise service buses (ESBs).</li> <li>Messages are transported within the service mesh, but the messaging functions are performed alongside the services receiving the messages. Each instance is attached to a proxy that relays messages to and fro the service mesh.</li></ul> <p>Service Mesh is getting more mature, while middleware can be ideal for transporting information between monolithic applications. Migrating from Middleware to Service Mesh might need to uproot the ways their application and infrastructure.</p> <h2 id="visualizing-systems-with-statemaps"><a href="#visualizing-systems-with-statemaps" aria-hidden="true" class="header-anchor">#</a> Visualizing Systems with Statemaps</h2> <p><a href="https://www.slideshare.net/bcantrill/visualizing-systems-with-statemaps" target="_blank" rel="noopener noreferrer">Slide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Some interesting points:</p> <ul><li>System goes wrong in silent and unseeable.</li> <li>We amplify the signals via latencies, etc.</li> <li>Observation on a system is necessary.</li> <li>Aggregation on the instrumenting data is essential for scaling.</li> <li>There is not one way to visualize the data for the system, but many. And visualization is an essential facet of system observability.</li> <li>Statemap: a visualization of entity state over time. It operates on a payload of JSON where each line corresponds to a state transition for an entity. For example:<div class="language- extra-class"><pre class="language-text"><code>{time: 1545005553, entity: 1, state: 0}
{time: 1545005554, entity: 1, state: 1}
</code></pre></div>States are described in JSON metadata header. For example:<div class="language- extra-class"><pre class="language-text"><code>{
  title: &quot;&quot;,
  states: {
      state1: {value: 0, color: #fff},
      state1: {value: 0, color: #fff},
  }
}
</code></pre></div></li></ul> <h2 id="airbnb-soa-migration"><a href="#airbnb-soa-migration" aria-hidden="true" class="header-anchor">#</a> Airbnb SOA Migration</h2> <p><a href="https://www.infoq.com/presentations/airbnb-soa-migration" target="_blank" rel="noopener noreferrer">Presentation and Transcript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Because of the tangling modules, the growth of the business, and the increasing number of incidents, they decided to migrate to SOA.</li> <li>Why SOA? SOA is a network of loosely-coupled services. It's well proofed in many organizations.</li> <li>Two design principles:
<ul><li>Services should own both reads and writes to their own data.</li> <li>Data mutations should publish via standard events.</li></ul></li> <li>Getting started:
<ul><li>Customize an ActiveRecord adaptor.</li> <li>Re-route queries to services.</li> <li>Organize services into data services, middle-tier services, etc, and design their calling directions.</li> <li>Incremental migration.</li> <li>Let the framework auto-generate code, do standard testing and deployment that replay production traffic via the utility Diffy.</li> <li>Write Thrift IDL for the stability of the interfaces of the services.</li></ul></li> <li>Thoughts:
<ul><li>SOA is a high investment cost.</li> <li>Service orchestration becomes complex. Kubernetes comes in for scaling services.</li> <li>It's a long commitment and journey. Ensure you don't break functionality on the way by comparing slowly, carefully, and piecemeal.</li></ul></li></ul> <h2 id="evolution-of-application-data-caching-from-ram-to-ssd"><a href="#evolution-of-application-data-caching-from-ram-to-ssd" aria-hidden="true" class="header-anchor">#</a> Evolution of Application Data Caching: From RAM to SSD</h2> <p><a href="https://medium.com/netflix-techblog/evolution-of-application-data-caching-from-ram-to-ssd-a33d6fa7a690" target="_blank" rel="noopener noreferrer">The Netflix Tech Blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Context:
<ul><li>Move the data swiftly and securely across all regions came at a considerable increase in cost and complexities.</li></ul></li> <li>Goal:
<ul><li>Provide a global caching solution which was not only fast but was also cost-effective.</li></ul></li> <li>Solution:
<ul><li>SSDs for Caching. The cost to store 1 TB of data on SSD is much lower than storing the same amount in RAM.</li> <li>Store all the data on SSD (RocksDB) and the active/hot data in RAM (Memcached). The problem is the poor performance for the large cluster when overwriting existing data on RocksDB (for compactions).</li> <li>Memcached External Storage (extstore): All the metadata (key &amp; other metadata) is stored in RAM whereas the actual data is stored on flash.</li> <li>Move some of the large RAM based memcached clusters to considerably smaller extstore clusters.</li></ul></li> <li>Conclusions:
<ul><li>All production clusters are running extstore.</li></ul></li></ul> <h2 id="implementing-the-netflix-media-database"><a href="#implementing-the-netflix-media-database" aria-hidden="true" class="header-anchor">#</a> Implementing the Netflix Media Database</h2> <p><a href="https://medium.com/netflix-techblog/implementing-the-netflix-media-database-53b5a840b42a" target="_blank" rel="noopener noreferrer">The Netflix Tech Blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Overview:
<ul><li>This post discusses the key traits of NMDB and how the design aims to address them.</li></ul></li> <li>System requirements:
<ul><li>Support for Structured Data</li> <li>Multi-tenancy and Access Control</li> <li>Integration with the legacy system</li> <li>SLA Guarantees</li> <li>Flexibility of Queries</li></ul></li></ul> <h2 id="loki"><a href="#loki" aria-hidden="true" class="header-anchor">#</a> Loki</h2> <p><a href="https://github.com/grafana/loki" target="_blank" rel="noopener noreferrer">GitHub Project<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> |
<a href="https://docs.google.com/document/d/11tjK_lvp1-SVsFZjgOTr1vV3-q6vBAsZYIQ5ZeYBkyM/view" target="_blank" rel="noopener noreferrer">The design document<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ul><li>Context:
<ul><li>Extra context switch is needed for engineering between the metric (time series) dashboard and the logs.</li></ul></li> <li>How it solves the problem:
<ul><li>Install the agent <code>promtail</code> to each server or pod, gathering logs and sending them to loki.</li> <li>The central server <code>loki</code> indexes the metadata of log streams and store them.</li> <li>Grafana as the dashboard for querying logs to <code>loki</code> in prometheus-like queries, for example, <code>{app=&quot;mysql&quot;,name=&quot;mysql-backup&quot;}</code>.</li></ul></li> <li>The challenges:
<ul><li>Obtain reliable metadata that is consistent with the metadata associated with the time series / metrics.
<ul><li>Solution: Use same service discovery and label relabeling libraries as Prometheus.</li></ul></li> <li>Choose the chunk size. Is it going to be 4kb/s, or 8kb/s, or more?
<ul><li>Solution: It depends on operation cost vs storage costs, chunk index load, Cost of memory for building chunks v/s risk of loss, Compression effectiveness.</li></ul></li> <li>Chunks are many orders of magnitude larger than Prometheus/Cortex chunks
<ul><li>Solution: Support streaming and iterating over them.</li></ul></li></ul></li></ul> <h2 id="docker-app"><a href="#docker-app" aria-hidden="true" class="header-anchor">#</a> Docker App</h2> <p><a href="https://blog.docker.com/2018/12/docker-app-and-cnab/" target="_blank" rel="noopener noreferrer">Introduction<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> |
<a href="https://github.com/docker/app" target="_blank" rel="noopener noreferrer">GitHub Project<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Context:
<ul><li>You have several environments where you want to deploy the application, with small configuration differences.</li> <li>You have lots of similar applications.</li> <li>Compose files are not easy to share.</li></ul></li> <li>Solution:
<ul><li>Make your Docker Compose applications reusable, and share them on Docker Hub</li></ul></li> <li>Usage:<div class="language- extra-class"><pre class="language-text"><code># create a `docker-compose.yaml` and `hello.dockerapp`
$ docker-app init --single-file hello

# generate final docker-compose.yaml
$ docker-app render | docker-compose -f - up

# share the .dockerapp
$ docker-app push --namespace ${myNamespace} --tag latest
</code></pre></div></li></ul> <p>Read the source code:</p> <p><a href="https://github.com/docker/app/blob/master/loader/loader.go" target="_blank" rel="noopener noreferrer">Loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-go extra-class"><pre class="language-go"><code>metadata<span class="token punctuation">,</span> compose<span class="token punctuation">,</span> settings <span class="token operator">=</span> <span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;---&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token function">NewApp</span><span class="token punctuation">(</span><span class="token punctuation">[</span>metadata<span class="token punctuation">,</span> compose<span class="token punctuation">,</span> settings<span class="token punctuation">]</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><p><a href="https://github.com/docker/app/blob/master/render/render.go" target="_blank" rel="noopener noreferrer">Render<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-go extra-class"><pre class="language-go"><code># pseudo code
composeConfigFiles <span class="token operator">=</span> <span class="token function">Load</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">MetadataRaw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> settings<span class="token punctuation">.</span><span class="token function">WithPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">FromFlatten</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Merge</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">Settings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaPrefixed<span class="token punctuation">,</span> envSettings<span class="token punctuation">)</span>

<span class="token function">render</span><span class="token punctuation">(</span>composeConfigFiles<span class="token punctuation">)</span>
</code></pre></div><p><a href="https://github.com/docker/app/blob/master/specification/schema.go" target="_blank" rel="noopener noreferrer">Schema Check<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-go extra-class"><pre class="language-go"><code>gojsonschema<span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span>
    gojsonschema<span class="token punctuation">.</span><span class="token function">NewStringLoader</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>schemaData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    gojsonschema<span class="token punctuation">.</span><span class="token function">NewGoLoader</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="what-is-cnab"><a href="#what-is-cnab" aria-hidden="true" class="header-anchor">#</a> What is CNAB?</h2> <p><a href="https://www.morethanseven.net/2018/12/15/what-is-cnab/" target="_blank" rel="noopener noreferrer">www.morethanseven.net<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Formalisation of a pattern we’ve seen for multi-toolchain installers. The multi-toolchain here especially means a matrix of DSL/Cloud-specific/YAML choices.</li> <li>Commoditization of the packaging part of the infrastructure-as-code stack. It's like Puppet and the Forge, Chef and the Supermarket, Ansible and Ansible Galaxy, Terraform and the Module Registry, you name it. CNAB commoditize them and provide tools for anyone implementing something similar.</li></ul> <h2 id="cnab-spec"><a href="#cnab-spec" aria-hidden="true" class="header-anchor">#</a> CNAB Spec</h2> <p><a href="https://github.com/deislabs/cnab-spec" target="_blank" rel="noopener noreferrer">Specification<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Goal: Bundling, installing, and managing distributed applications, that are by design, cloud agnostic.</p> <p>Concepts:</p> <ul><li>CNAB: Cloud Native Application Bundles, a format.</li> <li>bundle.json: It defines the metadata of the package.</li> <li>bundle.cnab: A bundle.json with signing information.</li> <li>thin bundle: A package with only the definitions of the package.</li> <li>thick bundle: A package with the definitions of the package, and the decoded data of all images.</li> <li>invocation image: The installer of the package. It installs dependencies to the host environment or platform.</li> <li>execution images: The dependent images of the application.</li> <li>run tool: the entry point of the invocation image.</li> <li>claim: a history of the installation of the bundle.</li> <li>repository: a warehouse for storing bundles.</li></ul> <h2 id="rakanalh-scheduler"><a href="#rakanalh-scheduler" aria-hidden="true" class="header-anchor">#</a> rakanalh/scheduler</h2> <p><a href="https://github.com/rakanalh/scheduler" target="_blank" rel="noopener noreferrer">GitHub Project URL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>This is a Task scheduler for Golang. It executes callbacks (goroutines) after a pre-defined amount of time.</p> <p>Basic usage:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Instantiate</span>
noOpStorage <span class="token operator">:=</span> storage<span class="token punctuation">.</span><span class="token function">NewNoOpStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
s <span class="token operator">:=</span> scheduler<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>storage<span class="token punctuation">)</span>

<span class="token comment">// Define your own function.</span>
<span class="token keyword">func</span> <span class="token function">MyFunc</span><span class="token punctuation">(</span>arg1 <span class="token builtin">string</span><span class="token punctuation">,</span> arg2 <span class="token builtin">string</span><span class="token punctuation">)</span>

<span class="token comment">// Run after 5 seconds</span>
taskID <span class="token operator">:=</span> s<span class="token punctuation">.</span><span class="token function">RunAfter</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">*</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">,</span> MyFunc<span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// Run every minute.</span>
taskID <span class="token operator">:=</span> s<span class="token punctuation">.</span><span class="token function">RunEvery</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Minute<span class="token punctuation">,</span> MyFunc<span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Read the source code:</p> <p>The data structure <code>Task</code> defines what will be executed. From the task, we can instruct how to run the task and derive when the next time the task will run.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Schedule <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	IsRecurring <span class="token builtin">bool</span>
	LastRun     time<span class="token punctuation">.</span>Time
	NextRun     time<span class="token punctuation">.</span>Time
	Duration    time<span class="token punctuation">.</span>Duration
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Task <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Schedule
	Func   FunctionMeta
	Params <span class="token punctuation">[</span><span class="token punctuation">]</span>Param
<span class="token punctuation">}</span>
</code></pre></div><p>The package <code>storage</code> adds, fetches, removes tasks, performing on certain storage. Noop means keeping in-memory.</p> <p>The data structure <code>Scheduler</code> is the runtime of scheduling all tasks.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Scheduler <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	funcRegistry <span class="token operator">*</span>task<span class="token punctuation">.</span>FuncRegistry
	stopChan     <span class="token keyword">chan</span> <span class="token builtin">bool</span>
	tasks        <span class="token keyword">map</span><span class="token punctuation">[</span>task<span class="token punctuation">.</span>ID<span class="token punctuation">]</span><span class="token operator">*</span>task<span class="token punctuation">.</span>Task
	taskStore    storeBridge
<span class="token punctuation">}</span>
</code></pre></div><p>The entry point of <code>Scheduler</code> is a loop running forever. It tries to run all pending jobs every second. The pending jobs are from the storage selecting those supposed to run in this second.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// entryPoint:</span>
<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ticker <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">NewTicker</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        <span class="token keyword">select</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token operator">&lt;-</span>ticker<span class="token punctuation">.</span>C<span class="token punctuation">:</span>
            scheduler<span class="token punctuation">.</span><span class="token function">runPending</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token operator">&lt;-</span>sigChan<span class="token punctuation">:</span>
            scheduler<span class="token punctuation">.</span>stopChan <span class="token operator">&lt;-</span> <span class="token boolean">true</span>
        <span class="token keyword">case</span> <span class="token operator">&lt;-</span>scheduler<span class="token punctuation">.</span>stopChan<span class="token punctuation">:</span>
            <span class="token function">close</span><span class="token punctuation">(</span>scheduler<span class="token punctuation">.</span>stopChan<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">...</span>

<span class="token comment">// runPending:</span>
<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> task <span class="token operator">:=</span> <span class="token keyword">range</span> scheduler<span class="token punctuation">.</span>tasks <span class="token punctuation">{</span>
    <span class="token keyword">if</span> task<span class="token punctuation">.</span><span class="token function">IsDue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">go</span> task<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token operator">!</span>task<span class="token punctuation">.</span>IsRecurring <span class="token punctuation">{</span>
            <span class="token boolean">_</span> <span class="token operator">=</span> scheduler<span class="token punctuation">.</span>taskStore<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span>
            <span class="token function">delete</span><span class="token punctuation">(</span>scheduler<span class="token punctuation">.</span>tasks<span class="token punctuation">,</span> task<span class="token punctuation">.</span><span class="token function">Hash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="refactor-large-functions"><a href="#refactor-large-functions" aria-hidden="true" class="header-anchor">#</a> Refactor Large Functions</h2> <p><a href="https://robert.muth.org/refactoring-large-functions.html" target="_blank" rel="noopener noreferrer">robert.muth.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Strategies For Breaking Up Functions:</p> <ul><li>Closures and loops are good candidates to be refactored.</li> <li>Pattern like <code>do_x()</code>, <code>do_y()</code> can be refactored.<div class="language- extra-class"><pre class="language-text"><code>// do x
...

// do y
...
</code></pre></div></li> <li>Long Parameter Lists: Bundle pass through parameters.by creating structs.</li> <li>Complex if: move the predicate to a function.</li> <li>Early Out Programming.<div class="language- extra-class"><pre class="language-text"><code>if !xxx:
    return

if !yyy:
    return

// main code
</code></pre></div></li> <li>Refactoring is a good occasion to make sure that all the code inside the function ends up at roughly the same high level of abstraction.</li> <li>Make small changes each time.</li></ul> <hr></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/soasme/enqueuezero/edit/master/techshack.weekly/2018-51.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.cf628e2c.js" defer></script><script src="/assets/js/120.54870231.js" defer></script><script src="/assets/js/5.487c1af3.js" defer></script>
  </body>
</html>
